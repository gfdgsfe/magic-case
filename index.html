<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0c10; color: #fff; font-family: 'Roboto', sans-serif; margin: 0; padding: 0; overflow: hidden; }
        
        /* –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ CaseMint */
        .case-wrapper { padding: 15px; }
        .case-card { 
            background: #161b22; border: 1px solid #30363d; border-radius: 14px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px; margin-bottom: 12px; cursor: pointer;
        }
        
        /* –î–≤–∏–∂–æ–∫ –†—É–ª–µ—Ç–∫–∏ */
        #roulette-container { display: none; position: fixed; inset: 0; background: #0a0c10; z-index: 9999; }
        .roulette-window { 
            position: absolute; top: 50%; left: 0; width: 100%; height: 160px; 
            background: #0d1117; border-y: 2px solid #30363d; transform: translateY(-50%);
            overflow: hidden;
        }
        .roulette-list { display: flex; position: absolute; left: 0; transition: transform 6s cubic-bezier(0.1, 0, 0.1, 1); }
        .roulette-item { 
            min-width: 120px; height: 160px; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; border-right: 1px solid #161b22; 
        }
        .roulette-pointer { 
            position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; 
            background: #eab308; z-index: 100; transform: translateX(-50%); box-shadow: 0 0 15px #eab308;
        }
    </style>
</head>
<body>

    <div id="shop-view" class="case-wrapper">
        <div class="flex justify-between items-center mb-6 px-2">
            <h1 class="text-xl font-black italic text-yellow-500">CASE MINT</h1>
            <div class="text-sm font-bold bg-gray-900 px-3 py-1 rounded-full border border-gray-800">‚≠ê 1,250</div>
        </div>

        <div class="case-card" onclick="openCase('Standard')">
            <div class="flex items-center gap-4">
                <span class="text-4xl">üì¶</span>
                <div>
                    <p class="font-bold">Standard</p>
                    <p class="text-[10px] text-gray-500">RTP 70%</p>
                </div>
            </div>
            <div class="bg-yellow-500 text-black font-black px-4 py-2 rounded-lg text-xs">100 ‚≠ê</div>
        </div>

        <div class="case-card" onclick="openCase('Rare')">
            <div class="flex items-center gap-4">
                <span class="text-4xl">üíé</span>
                <div>
                    <p class="font-bold text-blue-400">Rare Chest</p>
                    <p class="text-[10px] text-gray-500">RTP 70%</p>
                </div>
            </div>
            <div class="bg-blue-600 px-4 py-2 rounded-lg text-xs font-black">500 ‚≠ê</div>
        </div>
    </div>

    <div id="roulette-container">
        <div class="roulette-window">
            <div class="roulette-pointer"></div>
            <div id="roulette-list" class="roulette-list"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const DATA = {
            'Standard': [{e:'üí©',v:'10 ‚≠ê',c:40},{e:'ü™ô',v:'50 ‚≠ê',c:35},{e:'üíé',v:'200 ‚≠ê',c:20},{e:'üèÜ',v:'1000 ‚≠ê',c:5}],
            'Rare': [{e:'ü™ô',v:'50 ‚≠ê',c:45},{e:'üíé',v:'300 ‚≠ê',c:35},{e:'üîã',v:'1000 ‚≠ê',c:15},{e:'üëë',v:'5000 ‚≠ê',c:5}]
        };

        function openCase(type) {
            tg.HapticFeedback.impactOccurred('heavy');
            
            const shop = document.getElementById('shop-view');
            const container = document.getElementById('roulette-container');
            const list = document.getElementById('roulette-list');
            const items = DATA[type];

            shop.style.display = 'none';
            container.style.display = 'block';
            list.innerHTML = '';
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–µ–Ω—Ç—ã
            let pool = [];
            for (let i = 0; i < 80; i++) {
                const r = Math.random() * 100;
                let s = 0, win;
                for (let itm of items) {
                    s += itm.c;
                    if (r <= s) { win = itm; break; }
                }
                pool.push(win);
                const div = document.createElement('div');
                div.className = 'roulette-item';
                div.innerHTML = <div style="font-size:40px">${win.e}</div><div style="font-size:12px;font-weight:bold;margin-top:10px">${win.v}</div>;
                list.appendChild(div);
            }

            // –ó–∞–ø—É—Å–∫
            const itemWidth = 121;
            const target = 70; // –ù–∞ –∫–∞–∫–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è
            const x = (target * itemWidth) - (window.innerWidth / 2) + (itemWidth / 2);

            setTimeout(() => {
                list.style.transform = translateX(-${x}px);
            }, 100);

            // –ò—Ç–æ–≥
            setTimeout(() => {
                tg.showPopup({
                    title: 'üéâ –í–´–ò–ì–†–´–®!',
                    message: –í–∞—à –ø—Ä–∏–∑: ${pool[target].v},
                    buttons: [{type: 'ok', text: '–ó–ê–ë–†–ê–¢–¨'}]
                }, () => location.reload());
            }, 6500);
        }
    </script>
</body>
</html>
