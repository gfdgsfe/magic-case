<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #05070a; color: white; font-family: sans-serif; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }
        .case-block { 
            background: #161b22; border: 1px solid #30363d; border-radius: 12px; 
            padding: 20px; margin-bottom: 12px; display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; position: relative; z-index: 10;
        }
        .case-block:active { background: #1c2128; transform: scale(0.97); }
        
        #roulette-screen { display: none; position: fixed; inset: 0; background: #05070a; z-index: 9999; }
        .window-box { position: relative; width: 100%; height: 160px; background: #0d1117; overflow: hidden; border-top: 2px solid #30363d; border-bottom: 2px solid #30363d; margin-top: 40vh; transform: translateY(-50%); }
        .line-tape { display: flex; position: absolute; left: 0; height: 100%; transition: transform 6s cubic-bezier(0.1, 0, 0.1, 1); }
        .card-item { min-width: 120px; height: 160px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #161b22; }
        .center-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 3px; background: #fbbf24; z-index: 100; transform: translateX(-50%); box-shadow: 0 0 15px #fbbf24; }
    </style>
</head>
<body class="p-4">

    <div id="ui-menu">
        <div class="flex justify-between items-center mb-10 mt-4">
            <h1 class="text-2xl font-black text-yellow-500 italic">MINT SHOP</h1>
            <div class="bg-slate-900 border border-yellow-500/30 px-4 py-1 rounded-full text-sm font-bold">‚≠ê 1,250</div>
        </div>

        <div class="case-block" onclick="forceStart('Standard')">
            <div class="flex items-center gap-4">
                <span class="text-5xl">üì¶</span>
                <div>
                    <div class="font-bold text-lg">Standard</div>
                    <div class="text-[10px] text-gray-500 uppercase font-bold">RTP 70%</div>
                </div>
            </div>
            <div class="bg-yellow-500 text-black font-black px-4 py-2 rounded-xl">100 ‚≠ê</div>
        </div>

        <div class="case-block" onclick="forceStart('Rare')">
            <div class="flex items-center gap-4">
                <span class="text-5xl">üíé</span>
                <div>
                    <div class="font-bold text-lg text-blue-400">Rare Chest</div>
                    <div class="text-[10px] text-gray-500 uppercase font-bold">RTP 70%</div>
                </div>
            </div>
            <div class="bg-blue-600 text-white font-black px-4 py-2 rounded-xl">500 ‚≠ê</div>
        </div>
    </div>

    <div id="roulette-screen">
        <div class="text-center w-full absolute top-20">
            <div class="text-yellow-500 font-black text-2xl animate-pulse italic">MINTING...</div>
        </div>
        <div class="window-box">
            <div class="center-line"></div>
            <div id="tape" class="line-tape"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        const PRIZES = {
            'Standard': [{e:'üí©',v:'10 ‚≠ê',c:40}, {e:'ü™ô',v:'50 ‚≠ê',c:35}, {e:'üíé',v:'200 ‚≠ê',c:20}, {e:'üèÜ',v:'1000 ‚≠ê',c:5}],
            'Rare': [{e:'ü™ô',v:'50 ‚≠ê',c:45}, {e:'üíé',v:'300 ‚≠ê',c:35}, {e:'üîã',v:'1000 ‚≠ê',c:15}, {e:'üëë',v:'5000 ‚≠ê',c:5}]
        };

        function forceStart(caseType) {
            // –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('heavy');
            
            const menu = document.getElementById('ui-menu');
            const screen = document.getElementById('roulette-screen');
            const tape = document.getElementById('tape');
            const items = PRIZES[caseType];

            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω—ã
            menu.style.display = 'none';
            screen.style.display = 'block';
            tape.innerHTML = '';

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–∑—ã
            let pool = [];
            for (let i = 0; i < 80; i++) {
                const r = Math.random() * 100;
                let s = 0, win;
                for (let itm of items) {
                    s += itm.c;
                    if (r <= s) { win = itm; break; }
                }
                pool.push(win);
                const el = document.createElement('div');
                el.className = 'card-item';
                el.innerHTML = <div style="font-size:45px">${win.e}</div><div style="font-size:14px;font-weight:900;margin-top:10px">${win.v}</div>;
                tape.appendChild(el);
            }

            // –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            const cardW = 121;
            const target = 75;
            const stop = (target * cardW) - (window.innerWidth / 2) + (cardW / 2);

            setTimeout(() => {
                tape.style.transform = translateX(-${stop}px);
            }, 100);

            // –§–∏–Ω–∞–ª
            setTimeout(() => {
                const win = pool[target];
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
                alert("üéâ –¢–≤–æ–π –ø—Ä–∏–∑: " + win.v);
                location.reload();
            }, 6600);
        }
    </script>
</body>
</html>
