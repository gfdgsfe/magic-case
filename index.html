<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0f1e; color: white; font-family: sans-serif; overflow-x: hidden; }
        
        /* –°—Ç–∏–ª–∏ —Ä—É–ª–µ—Ç–∫–∏ */
        .roulette-wrapper {
            position: relative;
            width: 100%;
            height: 120px;
            overflow: hidden;
            border-top: 2px solid #1e293b;
            border-bottom: 2px solid #1e293b;
            background: #0f172a;
        }
        .roulette-line {
            display: flex;
            position: absolute;
            left: 0;
            transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1);
            will-change: transform;
        }
        .item {
            min-width: 100px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid #1e293b;
            font-size: 30px;
        }
        .pointer {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #f59e0b;
            z-index: 10;
            transform: translateX(-50%);
            box-shadow: 0 0 15px #f59e0b;
        }
    </style>
</head>
<body class="p-4">

    <div class="flex justify-between items-center mb-6">
        <h1 class="text-xl font-bold italic text-yellow-500">STANDARD CASE</h1>
        <div class="bg-slate-800 px-4 py-1 rounded-full border border-yellow-500/30">
            ‚≠ê <span id="balance">1000</span>
        </div>
    </div>

    <div id="roulette-screen" class="hidden mb-8">
        <div class="roulette-wrapper">
            <div class="pointer"></div>
            <div id="roulette-line" class="roulette-line"></div>
        </div>
    </div>

    <div id="main-screen" class="text-center py-10">
        <div class="text-9xl mb-10 drop-shadow-[0_0_50px_rgba(59,130,246,0.3)]">üì¶</div>
        <button onclick="spin()" class="w-full bg-yellow-500 text-black py-4 rounded-2xl font-black text-xl shadow-lg">
            –ö–†–£–¢–ò–¢–¨ –ó–ê 100 ‚≠ê
        </button>
    </div>

    <div class="mt-10">
        <h2 class="text-slate-500 uppercase text-xs font-bold mb-4 tracking-widest">–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏:</h2>
        <div class="grid grid-cols-2 gap-3">
            <div class="bg-slate-900 p-3 rounded-xl border border-slate-800">
                <span class="text-2xl">ü™ô</span>
                <p class="text-sm font-bold mt-1">50-80 –ó–≤–µ–∑–¥</p>
                <p class="text-[10px] text-slate-500">–®–∞–Ω—Å: 70% (Common)</p>
            </div>
            <div class="bg-slate-900 p-3 rounded-xl border border-blue-900">
                <span class="text-2xl">üíé</span>
                <p class="text-sm font-bold mt-1 text-blue-400">150 –ó–≤–µ–∑–¥</p>
                <p class="text-[10px] text-slate-500">–®–∞–Ω—Å: 25% (Rare)</p>
            </div>
            <div class="bg-slate-900 p-3 rounded-xl border border-yellow-600 col-span-2 text-center">
                <span class="text-2xl">üèÜ</span>
                <p class="text-sm font-bold mt-1 text-yellow-500">1000 –ó–í–ï–ó–î (JACKPOT)</p>
                <p class="text-[10px] text-slate-500">–®–∞–Ω—Å: 5% (Legendary)</p>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const ITEMS_CONFIG = [
            { id: 1, emoji: 'ü™ô', name: '50 ‚≠ê', chance: 40 },
            { id: 2, emoji: 'ü™ô', name: '80 ‚≠ê', chance: 30 },
            { id: 3, emoji: 'üíé', name: '150 ‚≠ê', chance: 25 },
            { id: 4, emoji: 'üèÜ', name: '1000 ‚≠ê', chance: 5 }
        ];

        function spin() {
            const main = document.getElementById('main-screen');
            const roulette = document.getElementById('roulette-screen');
            const line = document.getElementById('roulette-line');
            
            tg.HapticFeedback.impactOccurred('heavy');
            main.classList.add('hidden');
            roulette.classList.remove('hidden');

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ª–µ–Ω—Ç—É (80 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –¥–æ–ª–≥–æ–≥–æ –∫—Ä—É—á–µ–Ω–∏—è)
            line.innerHTML = '';
            let pool = [];
            for (let i = 0; i < 80; i++) {
                const rand = Math.random() * 100;
                let cumulative = 0;
                let selected = ITEMS_CONFIG[0];
                
                for (const item of ITEMS_CONFIG) {
                    cumulative += item.chance;
                    if (rand < cumulative) {
                        selected = item;
                        break;
                    }
                }
                pool.push(selected);
                
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = <span>${selected.emoji}</span><span class="text-[10px] mt-1">${selected.name}</span>;
                line.appendChild(div);
            }

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∫—É (–Ω–∞ 75-–π —ç–ª–µ–º–µ–Ω—Ç)
            const targetIndex = 75;
            const itemWidth = 101; // 100px + 1px border
            const centerOffset = window.innerWidth / 2 - itemWidth / 2;
            const finalPosition = targetIndex * itemWidth - centerOffset;

            setTimeout(() => {
                line.style.transform = translateX(-${finalPosition}px);
            }, 100);

            // –†–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (–≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏)
            setTimeout(() => {
                const winItem = pool[targetIndex];
                tg.HapticFeedback.notificationOccurred('success');
                tg.showAlert(`–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! –¢–≤–æ–π –ø—Ä–∏–∑: ${winItem.name}`);
                location.reload(); // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
            }, 5500);
        }
    </script>
</body>
</html>
